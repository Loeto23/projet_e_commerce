{% extends 'base.html.twig' %}

{% block title %}
Panier
{% endblock %}

{% set totalHT = 0 %}
{% set totalTTC = 4.99 %}

{% block section%}

<div id="all">
  <div id="content">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <!-- breadcrumb-->
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="{{ path('jeremy_panier_homepage') }}">Accueil</a></li>
              <li aria-current="page" class="breadcrumb-item active">Panier</li>
            </ol>
          </nav>
        </div>
        <div id="basket" class="col-lg-9">
          <div class="box">

          {% for flashMessage in app.session.flashbag.get('success') %}
            <div class="alert alert-success">
              {{ flashMessage }}
            </div>
          {% endfor %}

            <form method="post" action="">
              <h1>Panier</h1>
              <div class="table-responsive">
                <table class="table">
                  <thead>
                    <tr>
                      <th colspan="3">Produit</th>
                      <th colspan="3">Prix de l'article</th>
                    </tr>

                    {% if produit|length == 0 %}
                      <tr>
                        <td class="delBord" colspan="4"><center>Aucun articles dans votre panier</center></td>
                      </tr>
                    {% endif %}

                    {% for produit in produit %}
                  </thead>
                  <tbody>
                    <tr>
                    <form action="{{ path('jeremy_panier_ajouter' , { 'id' : produit.id }) }}" method="get">
                      <td class="delBord" colspan="3"><a href="#"><img src="{{ asset('uploads/photos/' ~ produit.photo ) }}" alt=""></a></td>
                      <td class="delBord" colspan="3">{{ produit.prix }}€</td>
                      <td class="delBord"><a href="{{path('jeremy_panier_supprimer', { 'id' : produit.id }) }}"><i class="fas fa-trash-alt"></i></a></td>
                    </tr>
                    </form>

                    {% set totalHT = totalHT + (produit.prix * panier[produit.id]) %}
                    {% set totalTTC = totalTTC  + (produit.prix * panier[produit.id])  %}

                    {% endfor %}
                  </tbody>
                </table>
              </div>
              <!-- /.table-responsive-->
              <div class="box-footer d-flex justify-content-between flex-column flex-lg-row">
                <div class="left"><a href="{{ path('jeremy_front_homepage') }}" class="btn btn-outline-secondary"><i class="fa fa-chevron-left"></i> Continuer vos achats</a></div>
                <div class="right">
                  <a href="{{ path('jeremy_passage_commande') }}" class="btn btn-primary">Passer la commande <i class="fa fa-chevron-right"></i></a>
                </div>
              </div>
            </form>
          </div>
          <!-- /.box-->
        </div>
        <!-- /.col-lg-9-->
        <div class="col-lg-3">
          <div id="order-summary" class="box">
            <div class="box-header">
              <h3 class="mb-0">Total</h3>
            </div>
            <p class="text-muted">Les frais d'expédition et les frais supplémentaires sont calculés en fonction des valeurs que vous avez entrées.</p>
            <div class="table-responsive">
              <table class="table">
                <tbody>
                  <tr>
                    <td class="delBord">Sous-total</td>
                    <th>{{ totalHT }}€</th>
                  </tr>
                  <tr>
                    <td class="delBord">Frais de port</td>
                    <th>4.99€</th>
                  </tr>
                  <tr class="total">
                    <td class="delBord">Total</td>
                    <th>{{ totalTTC }}€</th>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="box">
            <div class="box-header">
              <h4 class="mb-0">Code promotion</h4>
            </div>
            <p class="text-muted">Si vous avez un code promotion, entrez le ci-dessous.</p>
            <form>
              <div class="input-group" style="width: 100% !important">
                <input type="text" class="form-control"><span class="input-group-append">
                  <button type="button" class="btn btn-primary"><i class="fa fa-gift"></i></button></span>
              </div>
              <!-- /input-group-->
            </form>
          </div>
        </div>
        <!-- /.col-md-3-->
      </div>
    </div>
  </div>
</div>





{% endblock %}
